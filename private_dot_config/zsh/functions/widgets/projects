# interactively search ~/Code/, prefering tmux popup when possible

emulate -L zsh

cd ~/code

local dirb=$(basename $(fd -IH -td -s \\.git\$ -x dirname) | fzf-tmux -p 70% --preview-window 'right,70%' --preview 'cd {};git log --graph --decorate --all --pretty=format:"%C(cyan)%h%Creset %C()%s%Creset%n%C(dim italic white)      └─ %ar by %an %C(auto)  %D%n";cd -')

if ! [[ -z $dirb ]]; then
  BUFFER="cd ${dirb}"
  zle accept-line
fi
 
# vim: ft=zsh

